<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>No Barba | Barba - にほんご。</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="http://tr.you84815.space/barba/favicon.ico">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="../../css/fx.css">
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/main.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-106478577-1', 'auto');
      //ga('send', 'pageview');
    </script>
    <script src="../../js/highlight.pack.js"></script>
    <script src="../../js/barba.min.js"></script>
    <script src="../../js/base.js"></script>
  </head>
</html>
<body>
  <header>
    <div class="icon"><a class="no-barba" href="http://tr.you84815.space/"><img src="../../img/icon.png"></a></div>
    <div class="navi_toggle" onclick="toggleMenu()"><i class="menu-icon material-icons" id="navi_icon"></i></div>
    <div class="title">Barba - <a class="no-barba" href="http://tr.you84815.space/">にほんご。</a></div>
  </header>
  <script>
    toggleMenu = function() {
      let navi = document.getElementsByClassName("navi");
      navi[0].classList.toggle('show');
      let navi_icon = document.getElementById("navi_icon");
      navi_icon.classList.toggle('active');
    }
  </script>
  <div class="wrapper">
    <div class="main">
      <h1>No Barba</h1>
      <p>ページ4のリンクはbarbaを使いません。</p><br>
      <div id="barba-wrapper">
        <div class="barba-container" data-namespace="homepage">
          <p>ページ3</p>
          <p><a href="./1.html">ページ1を表示</a></p>
          <p><a href="./2.html">ページ2を表示</a></p>
          <p><a href="./4.php">ページ4を表示(チェックロジック追加)</a></p>
        </div>
      </div>
      <h4>HTML</h4>
      <h5>1.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22; data-namespace=&#x22;homepage&#x22;&#x3E;
    &#x3C;p&#x3E;ページ1&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./2.html&#x22;&#x3E;ページ2を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a class=&#x22;no-barba&#x22; href=&#x22;./3.html&#x22;&#x3E;ページ3を表示(&#x3C;code&#x3E;.no-barba&#x3C;/code&#x3E;)追加&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./4.php&#x22;&#x3E;ページ4を表示(チェックロジック追加)&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;</code></pre>
      <h5>2.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22; data-namespace=&#x22;homepage&#x22;&#x3E;
    &#x3C;p&#x3E;ページ2&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./1.html&#x22;&#x3E;ページ1を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a class=&#x22;no-barba&#x22; href=&#x22;./3.html&#x22;&#x3E;ページ3を表示(&#x3C;code&#x3E;.no-barba&#x3C;/code&#x3E;)追加&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./4.php&#x22;&#x3E;ページ4を表示(チェックロジック追加)&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;</code></pre>
      <h5>3.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22; data-namespace=&#x22;homepage&#x22;&#x3E;
    &#x3C;p&#x3E;ページ3&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./1.html&#x22;&#x3E;ページ1を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./2.html&#x22;&#x3E;ページ2を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./4.php&#x22;&#x3E;ページ4を表示(チェックロジック追加)&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;</code></pre>
      <h5>4.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22; data-namespace=&#x22;homepage&#x22;&#x3E;
    &#x3C;p&#x3E;ページ4&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./1.html&#x22;&#x3E;ページ1を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./2.html&#x22;&#x3E;ページ2を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a class=&#x22;no-barba&#x22; href=&#x22;./3.html&#x22;&#x3E;ページ3を表示(&#x3C;code&#x3E;.no-barba&#x3C;/code&#x3E;)追加&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;</code></pre>
      <h4>php</h4>
      <h5>4.php</h5>
      <pre><code class="php">&#x3C;?php
header('Content-Type: text/html; charset=UTF-8');
include('./4.html');
exit;</code></pre>
      <h4>JavaScript</h4>
      <pre><code class="js">Barba.Pjax.start();
// オリジナルのオブジェクトにBarba.Pjax.preventCheckを代入
Barba.Pjax.originalPreventCheck = Barba.Pjax.preventCheck;
 
// 通常のチェック機能を拡張
Barba.Pjax.preventCheck = function(evt, element) {
  // originalPreventCheck(Barba.Pjax.preventCheckが入っている)
  if (!Barba.Pjax.originalPreventCheck(evt, element)) {
    // 該当リンクはPJAXを無効化
    return false;
  }
 
  // element.href自体のチェック不要です
  // その為にoriginalPreventCheckを使いました。(その他のチェックもしています)
  if (/.php/.test(element.href.toLowerCase())) {
    // phpの場合はPJAXを無効化
    return false;
  }
 
  return true;
};</code></pre>
    </div>
  </div>
  <footer><span>
       &copy; 
      <script>document.write((new Date()).getFullYear());</script> tobijibu</span></footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-106478577-1', 'auto');
    //ga('send', 'pageview');
  </script>
  <script>
    hljs.initHighlightingOnLoad();
    
    Barba.Pjax.start();
    // オリジナルのオブジェクトにBarba.Pjax.preventCheckを代入
    Barba.Pjax.originalPreventCheck = Barba.Pjax.preventCheck;
    
    // 通常のチェック機能を拡張
    Barba.Pjax.preventCheck = function(evt, element) {
      // originalPreventCheck(Barba.Pjax.preventCheckが入っている)
      if (!Barba.Pjax.originalPreventCheck(evt, element)) {
        // 該当リンクはPJAXを無効化
        return false;
      }
    
      // element.href自体のチェック不要です
      // その為にoriginalPreventCheckを使いました。(その他のチェックもしています)
      if (/.php/.test(element.href.toLowerCase())) {
        // phpの場合はPJAXを無効化
        return false;
      }
    
      return true;
    };
  </script>
</body>