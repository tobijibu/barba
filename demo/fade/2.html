<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <title>Fade | Barba - にほんご。</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="icon" href="http://tr.you84815.space/barba/favicon.ico">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="../../css/fx.css">
    <link rel="stylesheet" href="../../css/base.css">
    <link rel="stylesheet" href="../../css/main.css">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-106478577-1', 'auto');
      //ga('send', 'pageview');
    </script>
    <script src="../../js/highlight.pack.js"></script>
    <script src="../../js/barba.min.js"></script>
    <script src="../../js/base.js"></script>
  </head>
</html>
<body>
  <header>
    <div class="icon"><a class="no-barba" href="http://tr.you84815.space/"><img src="../../img/icon.png"></a></div>
    <div class="navi_toggle" onclick="toggleMenu()"><i class="menu-icon material-icons" id="navi_icon"></i></div>
    <div class="title">Barba - <a class="no-barba" href="http://tr.you84815.space/">にほんご。</a></div>
  </header>
  <script>
    toggleMenu = function() {
      let navi = document.getElementsByClassName("navi");
      navi[0].classList.toggle('show');
      let navi_icon = document.getElementById("navi_icon");
      navi_icon.classList.toggle('active');
    }
  </script>
  <div class="wrapper">
    <div class="main">
      <h1>Fade</h1>
      <p>フェードイン/アウトでページ1とページ2を切り替えます。</p><br>
      <div id="barba-wrapper">
        <div class="barba-container">
          <p>ページ2</p>
          <p><a href="./1.html">ページ1を表示</a></p>
        </div>
      </div>
      <h4>HTML</h4>
      <h5>1.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22;&#x3E;
    &#x3C;p&#x3E;ページ1&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./2.html&#x22;&#x3E;ページ2を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;
&#x3C;script src=&#x22;../../js/jquery-3.2.1.min.js&#x22;&#x3E;&#x3C;/script&#x3E;</code></pre>
      <h5>2.html</h5>
      <pre><code class="html">&#x3C;div id=&#x22;barba-wrapper&#x22;&#x3E;
  &#x3C;div class=&#x22;barba-container&#x22;&#x3E;
    &#x3C;p&#x3E;ページ2&#x3C;/p&#x3E;
    &#x3C;p&#x3E;&#x3C;a href=&#x22;./1.html&#x22;&#x3E;ページ1を表示&#x3C;/a&#x3E;&#x3C;/p&#x3E;
  &#x3C;/div&#x3E;
&#x3C;/div&#x3E;
&#x3C;script src=&#x22;../../js/jquery-3.2.1.min.js&#x22;&#x3E;&#x3C;/script&#x3E;</code></pre>
      <h4>JavaScript</h4>
      <pre><code class="js">Barba.Pjax.start();
var FadeTransition = Barba.BaseTransition.extend({
  start: function() {
    /**
     * この関数はページ遷移が始まったらすぐに自動的に呼び出されます。
     * this.newContainerLoadingは新しいコンテナのローディングを示すpromiseです。
     * (barba.jsには便利なPromiseのpolyfillもあります。)
     */
 
    // ローディングが終わるとすぐに、
    // 古いページをフェードアウトさせて、新しいページをフェードインします
    Promise
      .all([this.newContainerLoading, this.fadeOut()])
      .then(this.fadeIn.bind(this));
  },
 
  fadeOut: function() {
    /**
     * this.oldContainerは古いコンテナのHTMLElementです。
     */
 
    return $(this.oldContainer).animate({ opacity: 0 }).promise();
  },
 
  fadeIn: function() {
    /**
     * this.newContainerは新しいコンテナのHTMLElementです。
     * この段階でnewContainerはDOM上に含まれています。
     * (#barba-container内にあり、visibility: hiddenです。)
     * メモ：newContainerはnewContainerLoadingを解決した後に利用できます。
     */
 
    var _this = this;
    var $el = $(this.newContainer);
 
    $(this.oldContainer).hide();
 
    $el.css({
      visibility : 'visible',
      opacity : 0
    });
 
    $el.animate({ opacity: 1 }, 400, function() {
      /**
       * 遷移が終了したら.done()を呼び出すのを忘れないでください！
       * .done()は自動的にDOMから古いコンテナを削除します。
       */
 
      _this.done();
    });
  }
});
 
/**
 * 次に、Barbaに作成した遷移処理を指定します。
 */
 
Barba.Pjax.getTransition = function() {
  /**
   * ここでロジックと遷移処理を指定できます！
   * 例えばページ毎や、リンク毎に別の遷移処理を指定することができます。
   */
 
  return FadeTransition;
};</code></pre>
    </div>
  </div>
  <footer><span>
       &copy; 
      <script>document.write((new Date()).getFullYear());</script> tobijibu</span></footer>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-106478577-1', 'auto');
    //ga('send', 'pageview');
  </script>
  <script src="../../js/jquery-3.2.1.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    
    Barba.Pjax.start();
    var FadeTransition = Barba.BaseTransition.extend({
      start: function() {
        /**
         * この関数はページ遷移が始まったらすぐに自動的に呼び出されます。
         * this.newContainerLoadingは新しいコンテナのローディングを示すpromiseです。
         * (barba.jsには便利なPromiseのpolyfillもあります。)
         */
    
        // ローディングが終わるとすぐに、
        // 古いページをフェードアウトさせて、新しいページをフェードインします
        Promise
          .all([this.newContainerLoading, this.fadeOut()])
          .then(this.fadeIn.bind(this));
      },
    
      fadeOut: function() {
        /**
         * this.oldContainerは古いコンテナのHTMLElementです。
         */
    
        return $(this.oldContainer).animate({ opacity: 0 }).promise();
      },
    
      fadeIn: function() {
        /**
         * this.newContainerは新しいコンテナのHTMLElementです。
         * この段階でnewContainerはDOM上に含まれています。
         * (#barba-container内にあり、visibility: hiddenです。)
         * メモ：newContainerはnewContainerLoadingを解決した後に利用できます。
         */
    
        var _this = this;
        var $el = $(this.newContainer);
    
        $(this.oldContainer).hide();
    
        $el.css({
          visibility : 'visible',
          opacity : 0
        });
    
        $el.animate({ opacity: 1 }, 400, function() {
          /**
           * 遷移が終了したら.done()を呼び出すのを忘れないでください！
           * .done()は自動的にDOMから古いコンテナを削除します。
           */
    
          _this.done();
        });
      }
    });
    
    /**
     * 次に、Barbaに作成した遷移処理を指定します。
     */
    
    Barba.Pjax.getTransition = function() {
      /**
       * ここでロジックと遷移処理を指定できます！
       * 例えばページ毎や、リンク毎に別の遷移処理を指定することができます。
       */
    
      return FadeTransition;
    };
  </script>
</body>